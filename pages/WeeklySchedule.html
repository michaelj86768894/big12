<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>GLFL Schedule</title>
<!-- ========================================================================================== LINKED STYLESHEETS ================== -->
<link rel="stylesheet" href="../css/global.css">
<link rel="stylesheet" href="../css/tables.css">
<link rel="stylesheet" href="../css/colorboxes.css">
<link rel="stylesheet" href="../css/teamnamesandlogos.css">

<style>

/* ========================================================================================== Controls + Cards ====== */
.controls { 
text-align:center; 
margin:15px 0; 
display:flex; 
flex-wrap:wrap; 
justify-content:center; 
gap:10px; 
}

select, input[type="text"] { 
padding:8px 10px; 
font-size:14px; 
}

.summary { 
display:flex; 
justify-content: center; 
gap:20px; 
margin:15px 0; 
flex-wrap:wrap; 
}

/* stronger, general winner highlight (covers .h2h tables + your match table) */
.h2h td.winner,
.divisions-table td.winner,
#matchTable td.winner,
.table-wrap td.winner {
font-weight: 700 !important;
background: #F5E6C8 !important;
color: #002855 !important;
position: relative;
z-index: 2;
}

.no-data, .loading { 
text-align:center; 
margin-top:14px; 
color:#666; 
}

.table-wrap {
overflow-x: auto;
-webkit-overflow-scrolling: touch;
}

.table-wrap table {
width: 100%;
min-width: 600px;
}

</style>
</head>

<body>

<!-- ========================================================================================== LOGO BAR ================== -->
<div class="team-logo-bar">
<div class="team-logo-container">
<a href="Teams/Boston.html"><img src="../images/Boston.png" alt="Boston" /></a>
<a href="Teams/Brooklyn.html"><img src="../images/Brooklyn.png" alt="Brooklyn" /></a>
<a href="Teams/CedarRapids.html"><img src="../images/CedarRapids.png" alt="Cedar Rapids" /></a>
<a href="Teams/Chicago.html"><img src="../images/Chicago.png" alt="Chicago" /></a>
<a href="Teams/Cleveland.html"><img src="../images/Cleveland.png" alt="Cleveland" /></a>
<a href="Teams/LosAngeles.html"><img src="../images/LosAngeles.png" alt="Los Angeles" /></a>
<a href="Teams/Miami.html"><img src="../images/Miami.png" alt="Miami" /></a>
<a href="Teams/Milwaukee.html"><img src="../images/Milwaukee.png" alt="Milwaukee" /></a>
<a href="Teams/NorthernArizona.html"><img src="../images/NorthernArizona.png" alt="Northern Arizona" /></a>
<a href="Teams/Philadelphia.html"><img src="../images/Philadelphia.png" alt="Philadelphia" /></a>
<a href="Teams/Tucson.html"><img src="../images/Tucson.png" alt="Tucson" /></a>
<a href="Teams/Vegas.html"><img src="../images/Vegas.png" alt="Vegas" /></a>
</div>
</div>

<!-- ========================================================================================== MAIN NAV ================== -->
<nav class="main-nav">
<div class="nav-container">

<a href="../index.html" class="logo">
<img src="../images/Logo.png" alt="League Logo" />
</a>

<input type="checkbox" id="menu-toggle" class="menu-toggle" aria-label="Toggle menu" />
<label for="menu-toggle" class="hamburger">&#9776;</label>

<!-- Nav Links -->
<ul class="nav-links">
<li class="dropdown">
<a href="#">About</a>
<ul class="dropdown-content">
<li><a href="About.html">Who We Are</a></li>
<li><a href="Bylaws.html">Bylaws</a></li>
</ul>
</li>

<li><a href="News.html">News</a></li>

<li class="dropdown">
<a href="#">History</a>
<ul class="dropdown-content">
<li><a href="History.html">History of the GLFL</a></li>
<li><a href="Seasons.html">GLFL Seasons</a></li>
<li><a href="Champions.html">GLFL Champions</a></li>
<li><a href="Awards.html">Individual Award Winners</a></li>
<li><a href="RecordBook.html">Record Book</a></li>
</ul>
</li>

<li class="dropdown">
<a href="#">Schedule &amp; Standings</a>
<ul class="dropdown-content">
<li><a href="Standings.html">Standings</a></li>
<li><a href="WeeklySchedule.html">Weekly Schedule</a></li>
</ul>
</li>

<li><a href="Teams.html">Teams</a></li>
<li><a href="Draft.html">Draft</a></li>
</ul>
</div>
</nav>

<div class="text-container">

<p>The GLFL’s regular season schedule spans from early September through mid-December, encompassing 14 weeks of intense gridiron battles. Each team faces its division rivals twice during the season, with those matchups strategically scattered across the schedule. The remaining teams in the league are encountered once, creating a diverse slate of games that adds intrigue and unpredictability to the race for playoff spots.</p>

<p>As the regular season concludes, the spotlight shifts to the seven-team single-elimination playoffs. The victors of each division, along with the four teams boasting the best overall records, earn their place in the postseason spectacle. Teams are seeded based on their overall performance, with division champions holding higher ranks than the remaining playoff contenders.</p>

<p>The top-seeded team earns a coveted bye week, granting them a strategic advantage. The remaining six teams, seeded 2–7, engage in the first round of the playoffs. The intensity rises in Round 2, with the winners of the 2/7 and 3/6 matchups facing off, while the winner of the 4/5 showdown confronts the formidable first seed.</p>

<p>The victorious teams from Round 2 earn the right to compete in the grand finale—the Lakefront Bowl. Traditionally held during the last weekend in December, this climactic event crowns the season's ultimate champion, immortalizing their journey through a season of triumphs and challenges. The road to the championship is paved with dedication, strategy, and the relentless pursuit of fantasy glory.</p>

<h3>Divisions</h3>

<table class="standard-table">
<thead>
<tr>
<th>West</th>
<th>Central</th>
<th>East</th>
</tr>
</thead>

<tbody>
<tr>
<td>Los Angeles Wildcats</td>
<td>Cedar Rapids Titans</td>
<td>Boston Brawlers</td>
</tr>
<tr>
<td>Northern Arizona Wranglers</td>
<td>Chicago Slaughter</td>
<td>Brooklyn Bolts</td>
</tr>
<tr>
<td>Tuscon Sugar Skulls</td>
<td>Cleveland Gladiators</td>
<td>Miami Inferno</td>
</tr>
<tr>
<td>Vegas Knight Hawks</td>
<td>Milwaukee Mustangs</td>
<td>Philadelphia Soul</td>
</tr>
</tbody>
</table>

<div class="standard-table">

<div class="controls">
<label for="team1">Team 1:</label>
<select id="team1">
<option value="">— Select team —</option>
</select>

<label for="team2">Team 2:</label>
<select id="team2">
<option value="">— Select team —</option>
</select>

<label for="yearFilter">Year:</label>
<select id="yearFilter">
<option value="ALL_YEARS">— All Years —</option>
</select>

<label for="gameTypeFilter">Game Type:</label>
<select id="gameTypeFilter">
<option value="ALL_TYPES">— All Types —</option>
</select>

<input type="text" id="matchFilter" placeholder="Filter matches (text search)" style="width:220px;">
</div>


	
<div class="loading" id="loadingMsg">Loading match data...</div>

<div id="matchTableWrap" style="display:none;">
<div class="table-wrap"> <!-- <-- add this wrapper -->
<table class="standard-table" id="matchTable">
<thead>
<tr>
<th style="width:120px">Week</th>
<th>Team 1</th>
<th>Team 2</th>
<th style="width:120px">Score</th>
<th>Game Type</th> <!-- ✅ new column -->
</tr>
</thead>
<tbody></tbody>
</table>
<div class="no-data" id="noMatches" style="display:none;">No matches found between the selected teams/year.</div>
</div> <!-- /.table-wrap -->
<br>
</div>
</div>

</div>


<script>
document.addEventListener("DOMContentLoaded", async function() {

// ========================================================================================== MOBILE NAVIGATION ==========================
const hamburger = document.querySelector(".hamburger");
const navLinks = document.querySelector(".nav-links");
const dropdownLinks = document.querySelectorAll(".nav-links .dropdown > a");

hamburger.addEventListener("click", function(e) {
e.stopPropagation();
navLinks.classList.toggle("nav-active");
});

dropdownLinks.forEach(link => {
link.addEventListener("click", function(e) {
if (window.innerWidth <= 768) {
e.preventDefault();
const submenu = this.nextElementSibling;
submenu.classList.toggle("dropdown-active");
}
});
});

document.addEventListener("click", function(e) {
if (window.innerWidth <= 768) {
const isClickInsideNav = navLinks.contains(e.target) || hamburger.contains(e.target);
if (!isClickInsideNav) {
navLinks.classList.remove("nav-active");
document.querySelectorAll(".dropdown-content").forEach(sub => sub.classList.remove("dropdown-active"));
}
}
});

// ========================================================================================== HEAD-TO-HEAD MATCHES ==========================
const csvUrl = "https://raw.githubusercontent.com/michaelj86768894/big12/main/Head2Head.csv?cb=" + new Date().getTime();

const team1Select = document.getElementById("team1");
const team2Select = document.getElementById("team2");
const yearSelect = document.getElementById("yearFilter");
const gameTypeSelect = document.getElementById("gameTypeFilter");
const matchFilterInput = document.getElementById("matchFilter");

const matchTableWrap = document.getElementById("matchTableWrap");
const matchTableBody = document.querySelector("#matchTable tbody");
//const summaryArea = document.getElementById("summaryArea");
const loadingMsg = document.getElementById("loadingMsg");
const noMatchesMsg = document.getElementById("noMatches");

//const cardTeam1Name = document.getElementById("cardTeam1Name");
//const cardTeam1Record = document.getElementById("cardTeam1Record");
//const cardTeam1PF = document.getElementById("cardTeam1PF");

//const cardTeam2Name = document.getElementById("cardTeam2Name");
//const cardTeam2Record = document.getElementById("cardTeam2Record");
//const cardTeam2PF = document.getElementById("cardTeam2PF");

//const head2headSummary = document.getElementById("head2headSummary");
//const mostRecentEl = document.getElementById("mostRecent");

let allMatches = [];
let teams = [];

// ========================== UTILITIES ==========================
function parseCsvToObjects(csvText) {
const lines = csvText.trim().split(/\r?\n/).filter(l => l.trim() !== "");
const headers = lines.shift().split(",").map(h => h.trim());
return lines.map(line => {
const cols = line.split(",").map(c => c.trim());
const obj = {};
headers.forEach((h,i)=> obj[h]=cols[i]??"");
return obj;
});
}

function parseDate_mmddyy(s) {
if (!s) return null;
const parts = s.split("/").map(p=>parseInt(p,10));
if (parts.length!==3 || parts.some(isNaN)) return null;
let [m,d,y]=parts;
if (y<100) y+=2000;
return new Date(y,m-1,d);
}

function formatDateShort(dateObj) {
if (!dateObj) return "N/A";
const m=String(dateObj.getMonth()+1).padStart(2,"0");
const d=String(dateObj.getDate()).padStart(2,"0");
const yy=String(dateObj.getFullYear()).slice(-2);
return `${m}/${d}/${yy}`;
}

function esc(s){ return String(s||""); }

// ========================== POPULATE DROPDOWNS ==========================
function populateTeamDropdowns() {
[team1Select, team2Select].forEach(drop => {
drop.innerHTML = "";
const allOpt = document.createElement("option");
allOpt.value = "ALL_TEAMS";
allOpt.textContent = "All Teams";
drop.appendChild(allOpt);

teams.forEach(team => {
const opt = document.createElement("option");
opt.value = team;
opt.textContent = team;
drop.appendChild(opt);
});

drop.value = "ALL_TEAMS";
drop.addEventListener("change", updateDisplay);
});

matchFilterInput.addEventListener("input", updateDisplay);
}

function populateYearDropdown() {
const yearSet = new Set(allMatches.map(m => m.date ? m.date.getFullYear() : null).filter(y => y));
yearSelect.innerHTML = `<option value="ALL_YEARS">— All Years —</option>`;
Array.from(yearSet).sort((a,b)=>b-a).forEach(y => {
const opt = document.createElement("option");
opt.value = y;
opt.textContent = y;
yearSelect.appendChild(opt);
});
yearSelect.addEventListener("change", updateDisplay);
yearSelect.value = new Date().getFullYear();
}

function populateGameTypeDropdown() {
const typeSet = new Set(allMatches.map(m => m.gameType).filter(t => t));
gameTypeSelect.innerHTML = `<option value="ALL_TYPES">— All Types —</option>`;
Array.from(typeSet).sort().forEach(t => {
const opt = document.createElement("option");
opt.value = t;
opt.textContent = t;
gameTypeSelect.appendChild(opt);
});
gameTypeSelect.addEventListener("change", updateDisplay);
gameTypeSelect.value = "ALL_TYPES";
}

// ========================== LOAD CSV ==========================
async function loadCsvAndInit() {
try {
const res = await fetch(csvUrl);
if(!res.ok) throw new Error("Network error "+res.status);
const text = await res.text();
const rows = parseCsvToObjects(text);

allMatches = rows.map(r=>{
const d = parseDate_mmddyy(r["Date"]);
return {
rawDate: r["Date"]||"",
date: d,
week: (r["Week"]||"").trim(),                // <-- ADDED
team1: (r["Team 1"]||"").trim(),
team2: (r["Team 2"]||"").trim(),
score1: parseFloat(r["Team 1 Score"]||"0") || 0,
score2: parseFloat(r["Team 2 Score"]||"0") || 0,
gameType: (r["Game Type"]||"").trim()
};
}).filter(m=>m.team1 && m.team2 && m.date);

const teamSet = new Set();
allMatches.forEach(m=>{teamSet.add(m.team1); teamSet.add(m.team2);});
teams = Array.from(teamSet).sort((a,b)=>a.localeCompare(b));

populateTeamDropdowns();
populateYearDropdown();
populateGameTypeDropdown();

loadingMsg.style.display = "none";

// Initial render
updateDisplay();
} catch(err) {
loadingMsg.textContent = "Error loading match data.";
console.error(err);
}
}

// ========================== FILTER & RENDER ==========================
function updateDisplay() {
const teamA = team1Select.value;
const teamB = team2Select.value;
const yearVal = yearSelect.value;
const gameTypeVal = gameTypeSelect.value;
const searchVal = matchFilterInput.value.trim().toLowerCase();

let filtered = allMatches.filter(m => {
const matchTeam1 = (teamA === "ALL_TEAMS" || m.team1 === teamA || m.team2 === teamA);
const matchTeam2 = (teamB === "ALL_TEAMS" || m.team1 === teamB || m.team2 === teamB);
return matchTeam1 && matchTeam2;
});

if(yearVal !== "ALL_YEARS"){
filtered = filtered.filter(m => m.date && m.date.getFullYear().toString() === yearVal);
}

if(gameTypeVal !== "ALL_TYPES"){
filtered = filtered.filter(m => m.gameType === gameTypeVal);
}

if(searchVal !== ""){
filtered = filtered.filter(m=>m.team1.toLowerCase().includes(searchVal) || m.team2.toLowerCase().includes(searchVal));
}

filtered.sort((a,b)=>b.date - a.date);

// --- SUMMARY CARDS ---
/*if(filtered.length > 0){
let winsA=0, winsB=0, pfA=0, pfB=0;
filtered.forEach(m=>{
if(teamA!=="ALL_TEAMS"){
pfA += (m.team1===teamA?m.score1:m.score2);
if((m.score1>m.score2 && m.team1===teamA) || (m.score2>m.score1 && m.team2===teamA)) winsA++;
}
if(teamB!=="ALL_TEAMS"){
pfB += (m.team1===teamB?m.score1:m.score2);
if((m.score1>m.score2 && m.team1===teamB) || (m.score2>m.score1 && m.team2===teamB)) winsB++;
}
});

cardTeam1Name.textContent = teamA!=="ALL_TEAMS"?teamA:"Team 1";
cardTeam1Record.textContent = teamB!=="ALL_TEAMS"?`${winsA} - ${winsB}`:`${winsA} Wins`;
cardTeam1PF.textContent = pfA;

cardTeam2Name.textContent = teamB!=="ALL_TEAMS"?teamB:"Team 2";
cardTeam2Record.textContent = teamB!=="ALL_TEAMS"?`${winsB} - ${winsA}`:`N/A`;
cardTeam2PF.textContent = teamB!=="ALL_TEAMS"?pfB:"N/A";

head2headSummary.textContent = `${filtered.length} games`;
mostRecentEl.textContent = filtered[0].date ? formatDateShort(filtered[0].date) : "N/A";

summaryArea.style.display = "flex";
} else {
summaryArea.style.display = "none";
}*/

// --- TABLE RENDER ---
matchTableBody.innerHTML = "";
let toggle = false;
let lastKey = null;

filtered.forEach(m => {
// Use the week column from the CSV (fall back to formatted date if missing)
const weekKey = esc(m.week) || (m.date ? formatDateShort(m.date) : "N/A");

// flip toggle when week/date changes — keeps alternating row bg grouped by week
if (weekKey !== lastKey) {
toggle = !toggle;
lastKey = weekKey;
}

const tr = document.createElement("tr");
tr.style.backgroundColor = toggle ? "#f3f3f3" : "#ffffff";
tr.innerHTML = `
<td>${weekKey}</td>
<td class="${m.score1 > m.score2 ? 'winner' : ''}">${esc(m.team1)}</td>
<td class="${m.score2 > m.score1 ? 'winner' : ''}">${esc(m.team2)}</td>
<td>${m.score1} - ${m.score2}</td>
<td>${esc(m.gameType)}</td>
`;
matchTableBody.appendChild(tr);
});

matchTableWrap.style.display="block";
noMatchesMsg.style.display = filtered.length===0 ? "block":"none";
}

// ========================== START ==========================
loadCsvAndInit();
});
</script>



</body>
</html>