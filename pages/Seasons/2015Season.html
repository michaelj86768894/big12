<!doctype html>
<html>
<head>

<style>
	
/* ====== Global Styles ====== */
body { 
  font-family: Arial, Helvetica, sans-serif; 
  color:#222; 
  padding:20px; 
  background:#ffffff; 
}

.wrap { max-width:1100px; margin:0 auto; }
h1 { text-align:center; color:#001433; margin-bottom:10px; } /* PRIMARY */

/* ====== Controls + Cards ====== */
.controls { 
  text-align:center; 
  margin:15px 0; 
  display:flex; 
  flex-wrap:wrap; 
  justify-content:center; 
  gap:10px; 
}

select, input[type="text"] { 
  padding:8px 10px; 
  font-size:14px; 
}

.summary { 
  display:flex; 
  justify-content: center; 
  gap:20px; 
  margin:15px 0; 
  flex-wrap:wrap; 
}

.card { 
  background:#fff; 
  padding:12px 16px; 
  border-radius:8px; 
  box-shadow:0 2px 6px rgba(0,0,0,0.06); 
  min-width:180px; 
  text-align:center; 
}

.card h3 { 
  margin:0 0 6px; 
  font-size:14px; 
  color:#444; 
}

.card p { 
  margin:0; 
  font-weight:700; 
  font-size:18px; 
  color:#001433; /* PRIMARY */
}

/* ====== Your Original Table Styles ====== */
table, th, td {
  table-layout: auto;
  border: 1px solid #001433; /* PRIMARY */
  border-collapse: collapse;
  padding: 5px;
  color: black; /* Default text color */
}

th {
  background-color: #001433; /* PRIMARY */
  color: #ffffff;
}

tr:nth-child(odd) { background-color: #ffffff; }
tr:nth-child(even) { background-color: #E8E8E8; }

tr:hover td, tr:hover th {
  background-color: #F0AE00; /* SECONDARY */
  color: #FFFFFF;
  border: 1px solid #002244; 
}

.table-container {
  display: inline-block;
  margin: 3px;
  vertical-align: top;
}

/* ====== Collapsible Styles ====== */
.collapsible {
  cursor: pointer;
  width: 100%;
  text-align: left;
  border: none;
  padding-top: 1%;
  background-color: #ffffff;
  color: #000000;
  font-size: 24px;
}

.active, .collapsible:hover {
  background-color: #001433; /* PRIMARY */
  color: #ffffff;
}

.collapsible:before {
  content: '\02c6';
  color: #000000;
  font-weight: bold;
  margin-left: 5px;
}

.active:before {
  content: "\02c7";
}

.content {
  max-height: 0;
  overflow: hidden;
  background-color: #ffffff;
  transition: max-height 0.2s ease-out;
  color: black;
}

.content a { color: #F0AE00; } /* SECONDARY */
.content a:hover { color: #F0AE00; } /* SECONDARY */

/* ====== Head-to-Head Scoped Table Styles ====== */
.h2h table {
  width:100%; 
  border-collapse:collapse; 
  margin-top:10px; 
  background:#fff; 
  border-radius:8px; 
  overflow:hidden; 
  box-shadow:0 2px 8px rgba(0,0,0,0.06); 
}

.h2h th { 
  background:#001433; /* PRIMARY */ 
  color:#fff; 
  padding:10px; 
  text-align:left; 
  font-weight:600; 
}

.h2h td { 
  padding:10px; 
  border-bottom:1px solid #eee; 
}

/*.h2h tr:nth-child(even) td { 
  background:#ffffff; 
}*/

.h2h td.winner { 
  font-weight:700; 
  background:#FCC201 !important;
/*	color: #00674F !important;*/
}

.no-data, .loading { 
  text-align:center; 
  margin-top:14px; 
  color:#666; 
}

/* ====== Mobile ====== */
@media (max-width:640px) {
  th, td { font-size:13px; padding:8px; }
  .card { min-width:140px; }
  .controls { flex-direction: column; gap:8px; }
}

	
	
	.box {
display: inline-block;
width: 20px;
height: 20px;
border: 1px solid rgba(0, 0, 0, .2);
}

.team_fourth {
background: #ffffff;
}

.team_second {
background: #F0AE00;
}

.team_third {
background: #007FC8;
}
	
.team_first {
background: #001433;
}
	
</style>

<meta charset="UTF-8">
<title>2015 Big 12 Season</title>
</head>

<body>
	
	

<p>The 2015 season marked the league's fourth installment of the Big 12. Opening on Thursday, September 10, 2015, with a highly anticipated rematch from the previous year's championship, the defending champions, Milwaukee Mustangs, hosted the Cleveland Gladiators. This clash marked the third consecutive season in which these two powerhouses faced off in the opening week. The result mirrored the previous year's championship game, with the Mustangs securing a decisive victory at 145-104. This win was notable as the first victory for a defending champion in the season following their title triumph. The season reached its pinnacle on Monday, December 28, 2015, concluding with the league's championship game. In a thrilling matchup, the Vegas Knight Hawks emerged triumphant, securing a 143-103 victory over the Milwaukee Mustangs to claim their first-ever Big 12 Championship.</p>
	
<table>
  <tbody>
    <tr>
      <td colspan="2"><center><img src="https://www.dropbox.com/scl/fi/lnq1lhu4dlfd01vksxni4/1-Big-12-Logo.png?rlkey=2jlol6c7y0qx3hxc26ojqgom2&st=16hq5j7p&raw=1" width="253" height="150" alt=""/></center></td>
    </tr>
    <tr>
      <td colspan="2"><strong><center>Regular Season</center></strong></td>
    </tr>
	  <tr>
      <td><strong>Duration</strong></td>
      <td>Sept. 10 2015<br>Dec. 7 2015</td>
    </tr>
    <tr>
      <td colspan="2"><strong><center>Playoffs</center></strong></td>
    </tr>
	  <tr>
      <td><strong>Start Date</strong></td>
      <td>Dec. 10 2015</td>
    </tr>
	  <tr>
      <td><strong>Conf. Champions</strong></td>
      <td>Milwaukee (3)<br>Vegas (1)</td>
    </tr>
	   <tr>
      <td colspan="2"><strong><center>Big 12 Championship IV</center></strong></td>
    </tr>
	  <tr>
      <td><strong>Date</strong></td>
      <td>Dec. 28 2015</td>
    </tr>
     <tr>
      <td><strong>Champions</strong></td>
      <td>Vegas Knight Hawks (1)</td>
    </tr>
  </tbody>
</table>
	<p> </p>
	
	
						<button class="collapsible"> Personnel Movement<hr></button>
<div class="content">
	
	<p>
In a notable personnel change, the Cedar Rapids Titans underwent a transition in their leadership by appointing Michael Arroyo as the new General Manager. This decision marked a shift from the previous leadership under Amanda Strutz, as Arroyo took on the role of GM for the first time in his career, bringing fresh perspectives and strategies to the team.</p>
	
	</div>	
	
	
	
	
	<button class="collapsible"> Draft<hr></button>
<div class="content">
	

<p>The 2015 draft marked the league's 4th annual gathering of Big 12 General Managers, converging at Kam's Corner Tap in Wauwatosa, WI, on September 5th, 2015, at 5:00 pm CST. This draft introduced notable changes, including the implementation of a lottery system on a separate day preceding the actual draft and the inclusion of the option to trade draft picks. The Brooklyn Bolts secured the coveted first overall pick and opted for Eddie Lacy from Green Bay to kick off the selections. This draft format added an extra layer of strategy and excitement for both teams and fans alike.</p>	


	
	<h3>Complete First Round Selections</h3>
	
	<table>
  <tbody>
    <tr>
      <th>Pick</th>
      <th>Big 12 Team</th>
      <th>Player</th>
      <th>POS</th>
      <th>NFL Team</th>
    </tr>
    <tr>
      <td>1</td>
      <td>Brooklyn</td>
      <td>Eddie Lacy</td>
      <td>RB</td>
      <td>GB</td>		
    </tr>
    <tr>
      <td>2</td>
      <td>Northern Arizona</td>
      <td>Adrian Peterson</td>
      <td>RB</td>
      <td>MIN</td>		
    </tr>
    <tr>
      <td>3</td>
      <td>Boston</td>
      <td>Jamaal Charles</td>
      <td>RB</td>
      <td>KC</td>		
    </tr>
     <tr>
      <td>4</td>
      <td>Miami</td>
      <td>LeVeon Bell</td>
      <td>RB</td>
      <td>PIT</td>		
    </tr>
    <tr>
      <td>5</td>
      <td>Milwaukee</td>
      <td>Antonio Brown*</td>
      <td>WR</td>
      <td>PIT</td>		
    </tr>
     <tr>
      <td>6</td>
      <td>Green Bay</td>
      <td>Aaron Rodgers</td>
      <td>QB</td>
      <td>GB</td>		
    </tr>
      <tr>
      <td>7</td>
      <td>Los Angeles</td>
      <td>CJ Anderson</td>
      <td>RB</td>
      <td>DEN</td>		
    </tr>
      <tr>
      <td>8</td>
      <td>Chicago</td>
      <td>Rob Gronkowski</td>
      <td>TE</td>
      <td>NE</td>		
    </tr>
       <tr>
      <td>9</td>
      <td>Philadelphia</td>
      <td>Matt Forte</td>
      <td>RB</td>
      <td>CHI</td>		
    </tr>
      <tr>
      <td>10</td>
      <td>Vegas</td>
      <td>Marshawn Lynch</td>
      <td>RB</td>
      <td>SEA</td>		
    </tr>
      <tr>
      <td>11</td>
      <td>Cedar Rapids</td>
      <td>DeMarco Murray</td>
      <td>RB</td>
      <td>PHL</td>		
    </tr>
      <tr>
      <td>12</td>
      <td>Cleveland</td>
      <td>Julio Jones</td>
      <td>WR</td>
      <td>ATL</td>		
    </tr>
  </tbody>
</table>
	
	<p>*MVP</p>
	</div>

	
	

		<button class="collapsible"> Regular Season<hr></button>
<div class="content">
<p>The 2015 regular season unfolded with a total of 156 games across a 13-week schedule, commencing on the Thursday night following Labor Day. Each Big 12 team engaged in one game per week, shaping the landscape for a competitive season.</p>
	
<p>In a surprising turn of events, the defending champion Milwaukee Mustangs experienced a mid-season slump, dropping three consecutive games. However, they rebounded strongly to finish the season with the best record in the league at 9-4, securing their third division crown. Alongside them, the Vegas Knight Hawks and the Brooklyn Bolts also clinched their first and third division titles repsectively, showcasing their prowess in the regular season. On the flip side, the Los Angeles Wildcats endured a challenging season, finishing with a 4-9 record, marking their worst performance to date and earning the title of the season's least successful team.</p>
	
		<h3>Standings</h3>
	
<div class="table-container">
<table>
    <tr>
      <th>East</th>
      <th>W</th>
      <th>L</th>
    </tr>
	  <tr>
      <td>(2) Brooklyn</td>
      <td>8</td>
      <td>5</td>		
    </tr>
    <tr>
      <td>(6) Boston</td>
      <td>6</td>
      <td>7</td>		
    </tr>
	  <tr>
      <td>Philadelphia</td>
      <td>6</td>
      <td>7</td>		
    </tr>
	  <tr>
      <td>Miami</td>
      <td>5</td>
      <td>8</td>		
    </tr>
</table>
	</div>	

	
<div class="table-container">
<table>
    <tr>
      <th>Central</th>
      <th>W</th>
      <th>L</th>
    </tr>
    <tr>
      <td>(1) Milwaukee</td>
      <td>9</td>
      <td>4</td>		
    </tr>
    <tr>
      <td>(4) Chicago</td>
      <td>8</td>
      <td>5</td>		
    </tr>
<tr>
      <td>Cleveland</td>
      <td>6</td>
      <td>7</td>		
    </tr>
	  <tr>
      <td>Cedar Rapids</td>
      <td>5</td>
      <td>8</td>		
    </tr>
</table>
	</div>
	
<div class="table-container">
<table>
    <tr>
      <th>West</th>
      <th>W</th>
      <th>L</th>
    </tr>
	  <tr>
      <td>(3) Vegas</td>
      <td>8</td>
      <td>5</td>		
    </tr>
    <tr>
      <td>(5) Northern Arizona</td>
      <td>7</td>
      <td>6</td>		
    </tr>
	  <tr>
      <td>Green Bay</td>
      <td>6</td>
      <td>7</td>		
    </tr>
    <tr>
      <td>Los Angeles</td>
      <td>4</td>
      <td>9</td>		
    </tr>
</table>
	</div>
	
	<p> </p>
	</div>
	
	
	
	
	
	<button class="collapsible"> Game Schedule<hr></button>
<div class="content">
  <div class="wrap h2h">


<div class="controls">
  <label for="team1">Team 1:</label>
  <select id="team1">
    <option value="">— Select team —</option>
  </select>

  <label for="team2">Team 2:</label>
  <select id="team2">
    <option value="">— Select team —</option>
    <option value="ALL_TEAMS">All Teams</option>
  </select>

  <label for="yearFilter">Year:</label>
  <select id="yearFilter">
    <option value="ALL_YEARS">— All Years —</option>
  </select>

  <label for="gameTypeFilter">Game Type:</label>
  <select id="gameTypeFilter">
    <option value="ALL_TYPES">— All Types —</option>
  </select>

  <input type="text" id="matchFilter" placeholder="Filter matches (text search)" style="width:220px;">
</div>

  <div class="summary" id="summaryArea" style="display:none;">
    <div class="card" id="cardTeam1">
      <h3 id="cardTeam1Name">Team 1</h3>
      <p id="cardTeam1Record">0 - 0</p>
      <div style="font-size:12px;color:#666;margin-top:6px;">Points For: <span id="cardTeam1PF">0</span></div>
    </div>

    <div class="card" id="cardTie">
      <h3 style="color:#666">Head-to-Head</h3>
      <p id="head2headSummary">0 games</p>
      <div style="font-size:12px;color:#666;margin-top:6px;">Most recent: <span id="mostRecent">N/A</span></div>
    </div>

    <div class="card" id="cardTeam2">
      <h3 id="cardTeam2Name">Team 2</h3>
      <p id="cardTeam2Record">0 - 0</p>
      <div style="font-size:12px;color:#666;margin-top:6px;">Points For: <span id="cardTeam2PF">0</span></div>
    </div>
  </div>

  <div class="loading" id="loadingMsg">Loading match data...</div>

  <div id="matchTableWrap" style="display:none;">
<table id="matchTable">
  <thead>
    <tr>
      <th style="width:120px">Date</th>
      <th>Team 1</th>
      <th>Team 2</th>
      <th style="width:120px">Score</th>
      <th>Game Type</th> <!-- ✅ new column -->
    </tr>
  </thead>
  <tbody></tbody>
</table>
    <div class="no-data" id="noMatches" style="display:none;">No matches found between the selected teams/year.</div>
	  <br>
      </div>
    </div>
  </div>
	
	
	
	
	<button class="collapsible"> Postseason<hr></button>
<div class="content">
	<br>
	
	
<p>The playoffs for the 2015 season kicked off on December 10, 2015, setting the stage for an exhilarating postseason. The journey culminated in a thrilling showdown on December 28, 2015, as the Vegas Knight Hawks secured their place in history by triumphing over Milwaukee with a final score of 140.8-102.5. This victory marked a significant milestone for the Knight Hawks, as they clinched their first-ever Big 12 Championship, etching their name in the league's illustrious history.</p>
	

<h3>Round 1</h3>
	
<p>The opening round of the 2015 playoffs unfolded from December 10 to December 14, 2015, delivering intense clashes that would shape the postseason narrative. The third-seeded Vegas Knight Hawks showcased their prowess in their postseason debut, securing a commanding 108-77 victory over the sixth-seeded Boston Brawlers. Despite the triumph, the Knight Hawks faced adversity as they lost their starting QB and RB for the remainder of the season, adding a bittersweet element to their success.</p>
	
<p>Meanwhile, in another electrifying matchup, the fifth-seeded Northern Arizona Wranglers, orchestrated an impressive upset against the fourth-seeded Chicago Slaughter. The Wranglers's resilient performance resulted in a convincing 112-91 win, marking the end of the Slaughter's inaugural postseason journey on a somewhat disappointing note. The stage was set for the remaining teams to continue their quest for glory in the ensuing rounds.</p>
	
<h3>Round 2</h3>
<p>The drama of the 2015 playoffs continued in Round 2, commencing on December 17, 2015, with compelling matchups that unfolded unexpected twists. The second-seeded Brooklyn Bolts, returning to the playoffs two years after their championship triumph, faced an upset as they hosted the Vegas Knight Hawks. Despite the Knight Hawks needing to address gaps at QB and RB due to injuries from the previous week, they delivered a stunning performance, securing a convincing 143-112 victory over the Bolts.</p>
	
<p>In the second game of the weekend, the top-seeded Milwaukee Mustangs faced a formidable challenge from the Northern Arizona Wranglers. The closely contested matchup ended with the Mustangs narrowly slipping past Northern Arizona with a final score of 145-144. This encounter marked the second meeting between the two teams in the season, with the Mustangs having previously defeated the Wranglers 105-103. The margin of victory in the two games for the Mustangs was less than two points, underscoring the intensity and competitiveness of their clashes. The outcomes set the stage for an enthralling journey toward the Big 12 Championship.</p>
	
<h3>Big 12 Championship</h3>
	
<center><img src="https://www.dropbox.com/scl/fi/idlym6plkmz3m9cxw6948/2015-Championship.png?rlkey=xe20fa3gnwpsgk5kgji1lufbc&st=o86bk7l3&raw=1" width="221" height="200" alt=""/></center>

<p>The climax of the 2015 Big 12 season unfolded in a riveting championship game between the Milwaukee Mustangs and the Vegas Knight Hawks on December 28, 2015 in Santa Clara, California. The Knight Hawks emerged triumphant with a commanding 143-103 victory, securing their first Big 12 Championship in team history.</p>
	
<p>The Mustangs, having achieved a noteworthy 75% postseason win percentage, stood as formidable contenders, second only to the first-time playoff team, the Knight Hawks (2-0). Aiming to etch their names in history with the league's first back-to-back championship, the Mustangs, veterans of three consecutive Big 12 Championship games, encountered a significant challenge against the Knight Hawks. Despite the Mustangs's regular-season success, the Knight Hawks had secured a decisive 143-95 victory in their previous encounter, setting the stage for a compelling championship clash.</p>

<p>Vegas's journey to the title was marked by adversity, as they faced the challenge of starting a different quarterback for the third consecutive game due to injuries. Additionally, the team had to overcome the absence of one of their top performers, Odell Beckham Jr., who was suspended by the league before the championship matchup. These obstacles made Vegas's championship win one of the most extraordinary and resilient in league history, showcasing their ability to overcome adversity and secure the coveted title. This victory marked the Knight Hawks' first appearance and triumph in a championship game, adding a significant milestone to their franchise history.</p>
	
	</div>	
	
	
				<button class="collapsible"> Awards<hr></button>
<div class="content">
	
	<p>In 2015, 2015, Vegas clinched their maiden division title. This triumph marked a significant milestone in the history of the franchise, elevating them to new heights of success, while Milwaukee and Brooklyn each celebrated their third division championships.</p>
	
	<p>Fifth overall pick, Antonio Brown secured his second consecutive MVP award, showcased exceptional performance with 388 points. Leading the Mustangs to a league-best 9-4 record and a championship game appearance, Brown's impact was undeniable.</p>
	
	<p>GM of the Year honors went to Michael Bautch of the Milwaukee Mustangs. Bautch, steering his team to a 9-4 record, achieved the distinction of becoming the first multiple-time winner of the award in league history.</p>
	
	<p>As the season unfolded, Vegas scripted an unprecedented story, securing their inaugural conference and league championships. Meanwhile, Milwaukee added another chapter to their legacy, claiming an impressive third consecutive conference championship. These achievements resonated with the essence of competition and the pursuit of greatness that define the Big 12.</p>
	
	
	</div>	
	
	
	
	
<script>
const csvUrl = "https://raw.githubusercontent.com/michaelj86768894/big12/main/Head2Head.csv?cb=" + new Date().getTime();
let allMatches = [];
let teams = [];

function parseCsvToObjects(csvText) {
  const lines = csvText.trim().split(/\r?\n/).filter(l => l.trim() !== "");
  const headers = lines.shift().split(",").map(h => h.trim());
  return lines.map(line => {
    const cols = line.split(",").map(c => c.trim());
    const obj = {};
    headers.forEach((h,i)=> obj[h]=cols[i]??"");
    return obj;
  });
}

function parseDate_mmddyy(s) {
  if (!s) return null;
  const parts = s.split("/").map(p=>parseInt(p,10));
  if (parts.length!==3 || parts.some(isNaN)) return null;
  let [m,d,y]=parts;
  if (y<100) y+=2000;
  return new Date(y,m-1,d);
}

function formatDateShort(dateObj) {
  if (!dateObj) return "N/A";
  const m=String(dateObj.getMonth()+1).padStart(2,"0");
  const d=String(dateObj.getDate()).padStart(2,"0");
  const yy=String(dateObj.getFullYear()).slice(-2);
  return `${m}/${d}/${yy}`;
}

async function loadCsvAndInit() {
  try {
    const res = await fetch(csvUrl);
    if(!res.ok) throw new Error("Network error "+res.status);
    const text = await res.text();
    const rows = parseCsvToObjects(text);

    allMatches = rows.map(r=>{
      const d=parseDate_mmddyy(r["Date"]);
      return {
        rawDate: r["Date"]||"",
        date: d,
        team1: (r["Team 1"]||"").trim(),
        team2: (r["Team 2"]||"").trim(),
        score1: parseInt(r["Team 1 Score"]||"0",10),
        score2: parseInt(r["Team 2 Score"]||"0",10),
        gameType: (r["Game Type"]||"").trim() // ✅ new field
      };
    }).filter(m=>m.team1 && m.team2);

    const teamSet=new Set();
    allMatches.forEach(m=>{teamSet.add(m.team1);teamSet.add(m.team2);});
    teams=Array.from(teamSet).sort((a,b)=>a.localeCompare(b));

    populateDropdowns();
    document.getElementById("loadingMsg").style.display="none";
  } catch(err) {
    document.getElementById("loadingMsg").textContent="Error loading match data.";
    console.error(err);
  }
}

function populateDropdowns() {
  const t1=document.getElementById("team1");
  const t2=document.getElementById("team2");

  teams.forEach(team=>{
    const o1=document.createElement("option"); o1.value=team; o1.textContent=team; t1.appendChild(o1);
    const o2=document.createElement("option"); o2.value=team; o2.textContent=team; t2.appendChild(o2);
  });

  t1.addEventListener("change", updateDisplay);
  t2.addEventListener("change", updateDisplay);
  document.getElementById("matchFilter").addEventListener("input", updateDisplay);
  document.getElementById("yearFilter").addEventListener("change", updateDisplay);
  document.getElementById("gameTypeFilter").addEventListener("change", updateDisplay); // ✅ new

  t2.value = "ALL_TEAMS";  // Set default for Team 2

  updateDisplay();
}

function populateYearDropdown(){
  const yearSet = new Set(allMatches.map(m=>m.date?m.date.getFullYear():null).filter(y=>y));
  const yearDropdown=document.getElementById("yearFilter");
  Array.from(yearSet).sort((a,b)=>b-a).forEach(y=>{
    const opt=document.createElement("option");
    opt.value=y;
    opt.textContent=y;
    yearDropdown.appendChild(opt);
  });
}

function populateGameTypeDropdown() {
  const typeSet = new Set(allMatches.map(m => m.gameType).filter(t => t));
  const typeDropdown = document.getElementById("gameTypeFilter");

  Array.from(typeSet).sort().forEach(t => {
    const opt = document.createElement("option");
    opt.value = t;
    opt.textContent = t;
    typeDropdown.appendChild(opt);
  });

  typeDropdown.value = "ALL_TYPES";
}

function getWinnerClass(m){
  if(m.score1>m.score2) return "winner";
  if(m.score2>m.score1) return "winner";
  return "";
}

function updateDisplay(){
  const teamA = document.getElementById("team1").value;
  const teamB = document.getElementById("team2").value;
  const yearVal = "2015";
  const gameTypeVal = "Season"; // ✅
  const searchVal = document.getElementById("matchFilter").value.trim().toLowerCase();

  let filtered = allMatches.filter(m=>
    (m.team1===teamA && (teamB==="ALL_TEAMS" || m.team2===teamB)) ||
    (m.team2===teamA && (teamB==="ALL_TEAMS" || m.team1===teamB))
  );

  if(yearVal!=="ALL_YEARS"){
    filtered = filtered.filter(m=>m.date && m.date.getFullYear()===parseInt(yearVal,10));
  }

  if(gameTypeVal !== "ALL_TYPES") { // ✅ filter Game Type
    filtered = filtered.filter(m => m.gameType === gameTypeVal);
  }

  if(searchVal!==""){
    filtered = filtered.filter(m=>(
      m.team1.toLowerCase().includes(searchVal) ||
      m.team2.toLowerCase().includes(searchVal)
    ));
  }

  filtered.sort((a,b)=>b.date - a.date);

  // --- SUMMARY CALCULATION ---
  if (filtered.length > 0) {
    let winsA = 0, winsB = 0, pfA = 0, pfB = 0;
    filtered.forEach(m => {
      pfA += (m.team1 === teamA ? m.score1 : m.score2);
      pfB += (m.team1 === teamB ? m.score1 : m.score2);

      if (m.score1 > m.score2 && m.team1 === teamA) winsA++;
      else if (m.score2 > m.score1 && m.team2 === teamA) winsA++;

      if (teamB !== "ALL_TEAMS") {
        if (m.score1 > m.score2 && m.team1 === teamB) winsB++;
        else if (m.score2 > m.score1 && m.team2 === teamB) winsB++;
      }
    });

    document.getElementById("head2headSummary").textContent = `${filtered.length} games`;
    document.getElementById("mostRecent").textContent = formatDateShort(filtered[0].date);
    document.getElementById("cardTeam1PF").textContent = pfA;

    if (teamB === "ALL_TEAMS") {
      document.getElementById("cardTeam1Record").textContent = `${winsA} Wins`;
      document.getElementById("cardTeam2Record").textContent = `N/A`;
      document.getElementById("cardTeam2PF").textContent = `N/A`;
    } else {
      document.getElementById("cardTeam1Record").textContent = `${winsA} - ${winsB}`;
      document.getElementById("cardTeam2Record").textContent = `${winsB} - ${winsA}`;
      document.getElementById("cardTeam2PF").textContent = pfB;
    }

    document.getElementById("summaryArea").style.display = "flex";
  } else {
    document.getElementById("summaryArea").style.display = "none";
  }

  const tbody = document.querySelector("#matchTable tbody");
  tbody.innerHTML="";
  filtered.forEach(m=>{
    const tr = document.createElement("tr");
    tr.innerHTML = `
      <td>${formatDateShort(m.date)}</td>
      <td class="${Number(m.score1) > Number(m.score2) ? 'winner' : ''}">${m.team1}</td>
      <td class="${Number(m.score2) > Number(m.score1) ? 'winner' : ''}">${m.team2}</td>
      <td>${m.score1} - ${m.score2}</td>
      <td>${m.gameType || ""}</td>`;
    tbody.appendChild(tr);
  });

  document.getElementById("matchTableWrap").style.display="block";
  document.getElementById("noMatches").style.display=filtered.length===0?"block":"none";
  document.getElementById("summaryArea").style.display=filtered.length>0?"flex":"none";

  refreshCollapsibleHeight();
}

loadCsvAndInit();

// --- Collapsible logic ---
var coll = document.getElementsByClassName("collapsible");
for (let i = 0; i < coll.length; i++) {
  coll[i].addEventListener("click", function() {
    this.classList.toggle("active");
    var content = this.nextElementSibling;
    if (content.style.maxHeight){
      content.style.maxHeight = null;
    } else {
      content.style.maxHeight = content.scrollHeight + "px";
    } 
  });
}

// --- helper to fix cutoff issue ---
function refreshCollapsibleHeight() {
  document.querySelectorAll(".collapsible.active + .content").forEach(content => {
    content.style.maxHeight = content.scrollHeight + "px";
  });
}
</script>	
	
	
	
	
	
	
	</body>
</html>
