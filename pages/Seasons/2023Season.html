<!doctype html>
<html>
<head>

<style>
	
/* ====== Global Styles ====== */
body { 
  font-family: Arial, Helvetica, sans-serif; 
  color:#222; 
  padding:20px; 
  background:#ffffff; 
}

.wrap { max-width:1100px; margin:0 auto; }
h1 { text-align:center; color:#001433; margin-bottom:10px; } /* PRIMARY */

/* ====== Controls + Cards ====== */
.controls { 
  text-align:center; 
  margin:15px 0; 
  display:flex; 
  flex-wrap:wrap; 
  justify-content:center; 
  gap:10px; 
}

select, input[type="text"] { 
  padding:8px 10px; 
  font-size:14px; 
}

.summary { 
  display:flex; 
  justify-content: center; 
  gap:20px; 
  margin:15px 0; 
  flex-wrap:wrap; 
}

.card { 
  background:#fff; 
  padding:12px 16px; 
  border-radius:8px; 
  box-shadow:0 2px 6px rgba(0,0,0,0.06); 
  min-width:180px; 
  text-align:center; 
}

.card h3 { 
  margin:0 0 6px; 
  font-size:14px; 
  color:#444; 
}

.card p { 
  margin:0; 
  font-weight:700; 
  font-size:18px; 
  color:#001433; /* PRIMARY */
}

/* ====== Your Original Table Styles ====== */
table, th, td {
  table-layout: auto;
  border: 1px solid #001433; /* PRIMARY */
  border-collapse: collapse;
  padding: 5px;
  color: black; /* Default text color */
}

th {
  background-color: #001433; /* PRIMARY */
  color: #ffffff;
}

tr:nth-child(odd) { background-color: #ffffff; }
tr:nth-child(even) { background-color: #E8E8E8; }

tr:hover td, tr:hover th {
  background-color: #F0AE00; /* SECONDARY */
  color: #FFFFFF;
  border: 1px solid #002244; 
}

.table-container {
  display: inline-block;
  margin: 3px;
  vertical-align: top;
}

/* ====== Collapsible Styles ====== */
.collapsible {
  cursor: pointer;
  width: 100%;
  text-align: left;
  border: none;
  padding-top: 1%;
  background-color: #ffffff;
  color: #000000;
  font-size: 24px;
}

.active, .collapsible:hover {
  background-color: #001433; /* PRIMARY */
  color: #ffffff;
}

.collapsible:before {
  content: '\02c6';
  color: #000000;
  font-weight: bold;
  margin-left: 5px;
}

.active:before {
  content: "\02c7";
}

.content {
  max-height: 0;
  overflow: hidden;
  background-color: #ffffff;
  transition: max-height 0.2s ease-out;
  color: black;
}

.content a { color: #F0AE00; } /* SECONDARY */
.content a:hover { color: #F0AE00; } /* SECONDARY */

/* ====== Head-to-Head Scoped Table Styles ====== */
.h2h table {
  width:100%; 
  border-collapse:collapse; 
  margin-top:10px; 
  background:#fff; 
  border-radius:8px; 
  overflow:hidden; 
  box-shadow:0 2px 8px rgba(0,0,0,0.06); 
}

.h2h th { 
  background:#001433; /* PRIMARY */ 
  color:#fff; 
  padding:10px; 
  text-align:left; 
  font-weight:600; 
}

.h2h td { 
  padding:10px; 
  border-bottom:1px solid #eee; 
}

/*.h2h tr:nth-child(even) td { 
  background:#ffffff; 
}*/

.h2h td.winner { 
  font-weight:700; 
  background:#FCC201 !important;
/*	color: #00674F !important;*/
}

.no-data, .loading { 
  text-align:center; 
  margin-top:14px; 
  color:#666; 
}

/* ====== Mobile ====== */
@media (max-width:640px) {
  th, td { font-size:13px; padding:8px; }
  .card { min-width:140px; }
  .controls { flex-direction: column; gap:8px; }
}

	
	
	.box {
display: inline-block;
width: 20px;
height: 20px;
border: 1px solid rgba(0, 0, 0, .2);
}

.team_fourth {
background: #ffffff;
}

.team_second {
background: #F0AE00;
}

.team_third {
background: #007FC8;
}
	
.team_first {
background: #001433;
}
	
</style>

<meta charset="UTF-8">
<title>2023 Big 12 Season</title>
</head>

<body>
	
	

<p>The 2023 season marks the 11th anniversary of the Big 12, bringing another thrilling chapter of fantasy football competition. Kicking off on Thursday, September 7th, 2023, the season opened with a captivating matchup between the defending champions, Green Bay Blizzard, and the Brooklyn Bolts. In an unexpected turn, the Bolts secured a convincing 160-146 victory, setting the tone for an unpredictable and exciting season. The journey reached its pinnacle on Sunday, December 31st, with the grand finale – the Big 12 Championship. This showdown featured the Milwaukee Mustangs and the Northern Arizona Wranglers, culminating in a spectacular clash that saw the Mustangs emerge triumphant with a 182-137 victory, clinching their second Big 12 Championship in franchise history.</p>
	
	
<table>
  <tbody>
    <tr>
      <td colspan="2"><center><img src="https://www.dropbox.com/scl/fi/lnq1lhu4dlfd01vksxni4/1-Big-12-Logo.png?rlkey=2jlol6c7y0qx3hxc26ojqgom2&st=16hq5j7p&raw=1" width="253" height="150" alt=""/></center></td>
    </tr>
    <tr>
      <td colspan="2"><strong><center>Regular Season</center></strong></td>
    </tr>
	  <tr>
      <td><strong>Duration</strong></td>
      <td>Sept. 7 2023<br>Dec. 11 2023</td>
    </tr>
    <tr>
      <td colspan="2"><strong><center>Playoffs</center></strong></td>
    </tr>
	  <tr>
      <td><strong>Start Date</strong></td>
      <td>Dec. 14 2023</td>
    </tr>
	  <tr>
      <td><strong>Conf. Champions</strong></td>
      <td>Milwaukee (4)<br>Northern Arizona (2)</td>
    </tr>
	   <tr>
      <td colspan="2"><strong><center>Big 12 Championship XI</center></strong></td>
    </tr>
	  <tr>
      <td><strong>Date</strong></td>
      <td>Dec. 31 2023</td>
    </tr>
     <tr>
      <td><strong>Champions</strong></td>
      <td>Milwaukee Mustangs (2)</td>
    </tr>
  </tbody>
</table>
	<p> </p>
	
	

	
	<button class="collapsible"> Personnel Movement<hr></button>
<div class="content">
	

<p>There were no personnel changes for this season.</p>
	
	<p> </p>
	</div>
	
	
		 
	<button class="collapsible"> Draft<hr></button>
<div class="content">
	

<p>The 2023 draft marked the 11th annual gathering of Big 12 General Managers, a pivotal event where teams strategically selected eligible football players to bolster their rosters. The online draft, held on Tuesday, September 5, 2023, at 6:00pm CST, saw the Los Angeles Wildcats making a significant first pick. Holding the coveted right to select, they chose Justin Jefferson from Minnesota with the inaugural pick, setting the stage for an exciting season ahead.</p>
	

	<h3>Complete First Round Selections</h3>
	
	<table>
  <tbody>
    <tr>
      <th>Pick</th>
      <th>Big 12 Team</th>
      <th>Player</th>
      <th>POS</th>
      <th>NFL Team</th>
    </tr>
    <tr>
      <td>1</td>
      <td>Los Angeles</td>
      <td>Justin Jefferson</td>
      <td>WR</td>
      <td>MIN</td>		
    </tr>
    <tr>
      <td>2</td>
      <td>Vegas</td>
      <td>Ja'Marr Chase</td>
      <td>WR</td>
      <td>CIN</td>		
    </tr>
    <tr>
      <td>3</td>
      <td>Miami</td>
      <td>Christian McCaffrey*</td>
      <td>RB</td>
      <td>SF</td>		
    </tr>
     <tr>
      <td>4</td>
      <td>Philadelphia</td>
      <td>Tyreek Hill</td>
      <td>WR</td>
      <td>MIA</td>		
    </tr>
	  
	  
    <tr>
      <td>5</td>
      <td>Chicago</td>
      <td>CeeDee Lamb</td>
      <td>WR</td>
      <td>DAL</td>		
    </tr>
	  
     <tr>
      <td>6</td>
      <td>Brooklyn</td>
      <td>Austin Ekeler</td>
      <td>RB</td>
      <td>LAC</td>		
    </tr>
	  
      <tr>
      <td>7</td>
      <td>Northern Arizona</td>
      <td>Travis Kelce</td>
      <td>TE</td>
      <td>KC</td>
    </tr>
	  
	  
      <tr>
      <td>8</td>
      <td>Cedar Rapids</td>
      <td>Davante Adams</td>
      <td>WR</td>
      <td>LV</td>		
    </tr>
	  
       <tr>
      <td>9</td>
      <td>Milwaukee</td>
      <td>Derrick Henry</td>
      <td>RB</td>
      <td>TEN</td>		
    </tr>
	  
	  
      <tr>
      <td>10</td>
      <td>Boston</td>
      <td>Stefon Diggs</td>
      <td>WR</td>
      <td>BUF</td>		
	  </tr>
	  
	  
	 <tr>
      <td>11</td>
      <td>Green Bay</td>
      <td>Nick Chubb</td>
      <td>RB</td>
      <td>CLE</td>		
	  </tr>
	  
	  
	        <tr>
      <td>12</td>
      <td>Cleveland</td>
      <td>Saquon Barkley</td>
      <td>RB</td>
      <td>NYG</td>		
	  </tr>
	</tbody>
</table>
	
	<p>*MVP</p>
	
	</div>


	

		<button class="collapsible"> Regular Season<hr></button>
<div class="content">
<p>The 2023 season, spanning 14 weeks with a total of 168 games, kicked off on the Thursday night following Labor Day, maintaining its tradition as the league's opening night. Each team engaged in two matchups against division rivals and one against all other teams unless subject to flex scheduling in the last week.</p>
	
<p>Building on the experimentation from the previous year, the league expanded its use of individual defensive positions (IDP) by adding two additional starting slots, eliminating the Team Defense position entirely. Roster adjustments continued with the removal of specific position starters for the offense, replaced by an Offensive Player Utility slot for all six starting positions.</p>
	
<p>Continuing a trend from the past three seasons, the league once again embraced flex scheduling during the final week of the regular season. This strategic approach allowed the league to make adjustments to the matchups, impacting divisional championships and playoff seeding.</p>
		
<h3>Standings</h3>
	
		<div class="table-container">
<table>
    <tr>
      <th>East</th>
      <th>W</th>
      <th>L</th>
    </tr>
    <tr>
      <td>(4) Philadelphia</td>
      <td>8</td>
      <td>6</td>		
    </tr>
	  <tr>
      <td>(5) Brooklyn</td>
      <td>8</td>
      <td>6</td>		
    </tr>
	      <tr>
      <td>Boston</td>
      <td>6</td>
      <td>8</td>		
    </tr>
    <tr>
      <td>Miami</td>
      <td>6</td>
      <td>8</td>		
    </tr>
</table>
	</div>
	
	
		<div class="table-container">
<table>
    <tr>
      <th>Central</th>
      <th>W</th>
      <th>L</th>
    </tr>
	<tr>
      <td>(3) Milwaukee</td>
      <td>8</td>
      <td>6</td>		
    </tr>
    <tr>
      <td>(6) Chicago</td>
      <td>7</td>
      <td>7</td>		
    </tr>
	<tr>
      <td>(7) Cleveland</td>
      <td>7</td>
      <td>7</td>		
    </tr>

    <tr>
      <td>Cedar Rapids</td>
      <td>5</td>
      <td>9</td>		
    </tr>
</table>
	</div>
	
	
		<div class="table-container">
<table>
    <tr>
      <th>West</th>
      <th>W</th>
      <th>L</th>
    </tr>
    <tr>
      <td>(1) Northern Arizona</td>
      <td>9</td>
      <td>5</td>		
    </tr>
    <tr>
      <td>(2) Los Angeles</td>
      <td>9</td>
      <td>5</td>		
    </tr>
    <tr>
      <td>Green Bay</td>
      <td>6</td>
      <td>8</td>		
    </tr>
	  <tr>
      <td>Vegas</td>
      <td>5</td>
      <td>9</td>		
    </tr>
</table>
	</div>	
	
	
	<p> </p>
	</div>
	
	
	

	
	<button class="collapsible"> Game Schedule<hr></button>
<div class="content">
  <div class="wrap h2h">


<div class="controls">
  <label for="team1">Team 1:</label>
  <select id="team1">
    <option value="">— Select team —</option>
  </select>

  <label for="team2">Team 2:</label>
  <select id="team2">
    <option value="">— Select team —</option>
    <option value="ALL_TEAMS">All Teams</option>
  </select>

  <label for="yearFilter">Year:</label>
  <select id="yearFilter">
    <option value="ALL_YEARS">— All Years —</option>
  </select>

  <label for="gameTypeFilter">Game Type:</label>
  <select id="gameTypeFilter">
    <option value="ALL_TYPES">— All Types —</option>
  </select>

  <input type="text" id="matchFilter" placeholder="Filter matches (text search)" style="width:220px;">
</div>

  <div class="summary" id="summaryArea" style="display:none;">
    <div class="card" id="cardTeam1">
      <h3 id="cardTeam1Name">Team 1</h3>
      <p id="cardTeam1Record">0 - 0</p>
      <div style="font-size:12px;color:#666;margin-top:6px;">Points For: <span id="cardTeam1PF">0</span></div>
    </div>

    <div class="card" id="cardTie">
      <h3 style="color:#666">Head-to-Head</h3>
      <p id="head2headSummary">0 games</p>
      <div style="font-size:12px;color:#666;margin-top:6px;">Most recent: <span id="mostRecent">N/A</span></div>
    </div>

    <div class="card" id="cardTeam2">
      <h3 id="cardTeam2Name">Team 2</h3>
      <p id="cardTeam2Record">0 - 0</p>
      <div style="font-size:12px;color:#666;margin-top:6px;">Points For: <span id="cardTeam2PF">0</span></div>
    </div>
  </div>

  <div class="loading" id="loadingMsg">Loading match data...</div>

  <div id="matchTableWrap" style="display:none;">
<table id="matchTable">
  <thead>
    <tr>
      <th style="width:120px">Date</th>
      <th>Team 1</th>
      <th>Team 2</th>
      <th style="width:120px">Score</th>
      <th>Game Type</th> <!-- ✅ new column -->
    </tr>
  </thead>
  <tbody></tbody>
</table>
    <div class="no-data" id="noMatches" style="display:none;">No matches found between the selected teams/year.</div>
	  <br>
      </div>
    </div>
  </div>
	
	
	
	<button class="collapsible"> Postseason<hr></button>
<div class="content">
	

<p>The journey through the postseason in the 2023 season commenced on December 14, 2023, reaching its pinnacle with the Big 12 Championship on December 31st. Seven teams earned the right to partake in the playoffs, with divisional winners automatically securing playoff spots, while the remaining four slots were claimed by the best non-division winning teams. Offering a respite only to the #1 seed in round 1, the rest of the matchups unfolded with the #2 seed facing the #7, the #3 seed clashing with the #6 seed, and the #4 seed challenging the #5 seed on the opening weekend. Despite the elimination of regular-season home field advantage, the playoff format emphasized home teams by endowing them with a 10-point bonus at the start of each week.</p>
	
	<h3>Round 1</h3>
	
<p>The opening act of the 2023 playoff spectacle unfolded on December 14, 2023, notably absent of the reigning Big 12 Champions, the Green Bay Blizzard. Last year's triumphant journey came to an unexpected halt as the Blizzard succumbed to a critical week 14 defeat against Cleveland, leaving them with a 6-8 record and on the sidelines for the postseason. The Northern Arizona Wranglers claimed the top seed, earning a bye and patiently awaited the outcome of Round 1.</p>
	
	<p>In the first clash of the weekend, the 7th-seeded Cleveland Gladiators squared off against the Los Angeles Wildcats. The spotlight shone on this matchup, featuring a quarterback exchange between the two teams late in the season, swapping Josh Allen for Patrick Mahomes (along with Travis Kelce). The game delivered on its promise of excitement, with fluctuations in momentum until the Wildcats asserted control on Sunday night, securing a decisive 175-147 victory. Los Angeles extended their dominance over Cleveland to 2-0 in the 2023 season and stretched their winning streak to five, dating back to 2019 in matchups that included the playoffs. The Wildcats were propelled by the impressive trio of Mahomes (34.8 pts), Jaylen Waddle (33 pts), and Rashee Rice (30 pts).</p>
	
<p>In the second playoff bout, the #3 seed Milwaukee Mustangs faced off against the #6 seed and divisional foe Chicago Slaughter. Chicago, on the quest for their first playoff victory in team history, encountered a dramatic journey to the postseason. Starting the season at 1-6, they teetered on the brink of managerial changes. However, a pivotal win over Philadelphia in week 8 ignited a remarkable turnaround, securing six victories in their last seven games to clinch a playoff berth for the first time since 2019. On the opposite side, the Mustangs entered the playoffs with a recent stumble, losing three of their last four games. The sole victory, crucially in week 14, determined the Central division crown against Brooklyn. The playoff encounter was decisive and swift, as Milwaukee seized an early lead and maintained control for a 187-118 triumph. Despite an outstanding 47-point performance from James Cook, Chicago couldn't overcome a 14-point outing from star quarterback Dak Prescott. For the Mustangs, Lamar Jackson, acquired in a late-season trade, led the charge with 35 points, while receivers Jordan Addison (34 pts) and Amon-Ra St. Brown (30 pts) contributed 30+ points each.</p>
	
<p>In the weekend's finale, the Philadelphia Soul hosted the Brooklyn Bolts in a matchup of the 4th and 5th seeds, presenting the closest talent pairing of the first round. The Soul, making their 5th playoff appearance, capped off a successful season while also claiming the East division crown. The team capitalized on a 10-point home-field advantage against Brooklyn based on tie-breaking procedures and secured a narrow victory of 137-131. The Bolts' rollercoaster season concluded with a close loss. Despite a turbulent journey, marked by alternating wins and losses, and a pivotal loss to Milwaukee in week 14, the team's 7th playoff appearance in 10 years was a commendable achievement. GM Colvin orchestrated a turnaround from a disappointing 5-9 campaign in 2022. A subpar performance from Brooklyn's star players, Austin Ekeler (10 pts) and Derrick Henry (7 pts), sealed the deal against Philadelphia, who were led by Jalen Hurts (38 pts), a consistent force throughout the season.</p>
	
	
		<h3>Round 2</h3>
	
<p>Round 2 unfolded on December 21, 2023, showcasing intense matchups that would determine the finalists for the Big 12 Championship. The West division champion and top-seed Northern Arizona Wranglers faced Philadelphia Soul, who narrowly advanced past Brooklyn in the first round. The anticipated clash between the #4 seed Soul and the #1 seed Wranglers seemed to heavily favor Philadelphia, entering the game as a substantial 29-point favorite, which included the 10-point home-field advantage granted to Northern Arizona. However, the game proved to be a stunning upset, defying projections. Despite Philadelphia exceeding their 176-point projection with an impressive 183 points, Northern Arizona's unstoppable performance shattered Big 12 records. Led by a career-high 63 points from Amari Cooper and a formidable 46 points from QB Matthew Stafford, the Wranglers set a new Big 12 playoff record with an astonishing 222 points. This victory propelled Northern Arizona to the Big 12 Championship for the second consecutive year, extending their dominance to 3-0 against Philadelphia in the season and 4-1 in their last five matchups. For Philadelphia, the defeat marked the end of their playoff journey, falling just one game short of the championship. Despite notable performances, including 49 points from Jalen Hurts and four players scoring 25+, it wasn't enough to overcome the record-setting Wranglers.</p>
	
<p>In the second matchup of the weekend, the Milwaukee Mustangs embarked on a journey to Los Angeles to face the 2nd-seeded Wildcats. Early projections painted a close contest, with the Wildcats being a less than 1-point underdog, excluding the 10-point advantage. This made it one of the closest playoff matchups in recent history. Once again, the dynamic duo of Lamar Jackson (45 pts) and Amon-Ra St. Brown (37 pts) shouldered the burden for the Mustangs, securing a hard-fought 169-151 victory. Milwaukee' win in this postseason clash mirrored their regular-season triumph by a margin of 7 points, breaking a streak of six consecutive losses to the Wildcats dating back to 2016. The triumph earned Milwaukee their recordd-setting fourth Big 12 Championship appearance. As for Los Angeles, the loss marked their second consecutive setback in the second round. An intriguing statistic emerged, highlighting that the Wildcats had lost to the eventual champion in each of their previous playoff defeats (Brooklyn '21, Green Bay '22, and Milwaukee '23).</p>
	
	
<h3>Big 12 Championship</h3>
	
<center><img src="https://www.dropbox.com/scl/fi/3h8v92kj5g1de90yu4xk2/2022-Championship.png?rlkey=2ct7c4xz2uu9vk5dpjcg4gh47&st=o5bevvly&raw=1" width="221" height="200" alt=""/></center>

<p>Hosted in Las Vegas, Nevada the climactic 2023 Big 12 Championship, featuring the Milwaukee Mustangs and the Northern Arizona Wranglers, reached its conclusion on December 31, 2023. Milwaukee entered the matchup as a 19-point favorite over the top-seeded Northern Arizona Wranglers. The narrative was fueled by some bold, go-big-or-go-home moves by the Wranglers, starting Khalil Shakir and Robert Woods. While these moves paid off in terms of bench scorers, it proved insufficient to secure the win. Hampered by injuries to key players such as Stafford, Cooper, and Raheem Mostert, the Wranglers faced a daunting task in pursuit of victory. Baker Mayfield emerged as the leading scorer with 31 points, but the absence of substantial contributions from other players led to another defeat in the final game, with a score of 137-182.</p>
	
<p>Despite the challenges, the Mustangs emerged victorious, clinching their second Big 12 Championship and the first in nine years. Lamar Jackson and Amon-Ra St. Brown continued their exceptional playoff performance, combining for an impressive 93 points of the team's total of 182. The Mustangs' running back duo, David Montgomery and Devin Singletary, each contributed 18 points, sealing the championship win. With this triumph, Milwaukee proudly reclaimed the title of champions for the first time since 2014.</p>
	
	
	
</div>	



				<button class="collapsible"> Awards<hr></button>
<div class="content">
	
	
	<p>The Mustangs continued their dominance in the Central division, securing their record-setting fifth division title. Northern Arizona and Philadelphia each celebrated their second division victory, their first since 2016 and 2017, respectively.</p>
	
	<p>Running back Christian McCaffrey stood out as the 2023 league MVP. McCaffrey delivered an exceptional performance, leading the league with 509 points. His impact on the Blizzard was particularly noteworthy, as the team traded for him in a strategic move to bolster their late-season push for the playoffs. Despite the team's playoff aspirations coming up short, McCaffrey's standout contributions earned him the prestigious MVP title for the season.</p>
	
	<p>Amid high expectations for the Northern Arizona Wranglers, GM Dan Shilts lived up to the challenge. He guided the team to the top seed in the playoffs, securing another appearance in the championship game. Shilts' exceptional leadership earned him the prestigious GM of the Year award, boasting a league-best 9-5 record and steering the Wranglers to another successful season.</p>
	
	<p>Milwaukee celebrated their fourth conference title and secured their second Big 12 Championship, adding another chapter to their storied history. Meanwhile, Northern Arizona claimed their second conference championship, showcasing their sustained excellence in the league.</p>
	
	
</div>	
	

	
	
<script>
const csvUrl = "https://raw.githubusercontent.com/michaelj86768894/big12/main/Head2Head.csv?cb=" + new Date().getTime();
let allMatches = [];
let teams = [];

function parseCsvToObjects(csvText) {
  const lines = csvText.trim().split(/\r?\n/).filter(l => l.trim() !== "");
  const headers = lines.shift().split(",").map(h => h.trim());
  return lines.map(line => {
    const cols = line.split(",").map(c => c.trim());
    const obj = {};
    headers.forEach((h,i)=> obj[h]=cols[i]??"");
    return obj;
  });
}

function parseDate_mmddyy(s) {
  if (!s) return null;
  const parts = s.split("/").map(p=>parseInt(p,10));
  if (parts.length!==3 || parts.some(isNaN)) return null;
  let [m,d,y]=parts;
  if (y<100) y+=2000;
  return new Date(y,m-1,d);
}

function formatDateShort(dateObj) {
  if (!dateObj) return "N/A";
  const m=String(dateObj.getMonth()+1).padStart(2,"0");
  const d=String(dateObj.getDate()).padStart(2,"0");
  const yy=String(dateObj.getFullYear()).slice(-2);
  return `${m}/${d}/${yy}`;
}

async function loadCsvAndInit() {
  try {
    const res = await fetch(csvUrl);
    if(!res.ok) throw new Error("Network error "+res.status);
    const text = await res.text();
    const rows = parseCsvToObjects(text);

    allMatches = rows.map(r=>{
      const d=parseDate_mmddyy(r["Date"]);
      return {
        rawDate: r["Date"]||"",
        date: d,
        team1: (r["Team 1"]||"").trim(),
        team2: (r["Team 2"]||"").trim(),
        score1: parseInt(r["Team 1 Score"]||"0",10),
        score2: parseInt(r["Team 2 Score"]||"0",10),
        gameType: (r["Game Type"]||"").trim() // ✅ new field
      };
    }).filter(m=>m.team1 && m.team2);

    const teamSet=new Set();
    allMatches.forEach(m=>{teamSet.add(m.team1);teamSet.add(m.team2);});
    teams=Array.from(teamSet).sort((a,b)=>a.localeCompare(b));

    populateDropdowns();
    document.getElementById("loadingMsg").style.display="none";
  } catch(err) {
    document.getElementById("loadingMsg").textContent="Error loading match data.";
    console.error(err);
  }
}

function populateDropdowns() {
  const t1=document.getElementById("team1");
  const t2=document.getElementById("team2");

  teams.forEach(team=>{
    const o1=document.createElement("option"); o1.value=team; o1.textContent=team; t1.appendChild(o1);
    const o2=document.createElement("option"); o2.value=team; o2.textContent=team; t2.appendChild(o2);
  });

  t1.addEventListener("change", updateDisplay);
  t2.addEventListener("change", updateDisplay);
  document.getElementById("matchFilter").addEventListener("input", updateDisplay);
  document.getElementById("yearFilter").addEventListener("change", updateDisplay);
  document.getElementById("gameTypeFilter").addEventListener("change", updateDisplay); // ✅ new

  t2.value = "ALL_TEAMS";  // Set default for Team 2

  updateDisplay();
}

function populateYearDropdown(){
  const yearSet = new Set(allMatches.map(m=>m.date?m.date.getFullYear():null).filter(y=>y));
  const yearDropdown=document.getElementById("yearFilter");
  Array.from(yearSet).sort((a,b)=>b-a).forEach(y=>{
    const opt=document.createElement("option");
    opt.value=y;
    opt.textContent=y;
    yearDropdown.appendChild(opt);
  });
}

function populateGameTypeDropdown() {
  const typeSet = new Set(allMatches.map(m => m.gameType).filter(t => t));
  const typeDropdown = document.getElementById("gameTypeFilter");

  Array.from(typeSet).sort().forEach(t => {
    const opt = document.createElement("option");
    opt.value = t;
    opt.textContent = t;
    typeDropdown.appendChild(opt);
  });

  typeDropdown.value = "ALL_TYPES";
}

function getWinnerClass(m){
  if(m.score1>m.score2) return "winner";
  if(m.score2>m.score1) return "winner";
  return "";
}

function updateDisplay(){
  const teamA = document.getElementById("team1").value;
  const teamB = document.getElementById("team2").value;
  const yearVal = "2023";
  const gameTypeVal = "Season"; // ✅
  const searchVal = document.getElementById("matchFilter").value.trim().toLowerCase();

  let filtered = allMatches.filter(m=>
    (m.team1===teamA && (teamB==="ALL_TEAMS" || m.team2===teamB)) ||
    (m.team2===teamA && (teamB==="ALL_TEAMS" || m.team1===teamB))
  );

  if(yearVal!=="ALL_YEARS"){
    filtered = filtered.filter(m=>m.date && m.date.getFullYear()===parseInt(yearVal,10));
  }

  if(gameTypeVal !== "ALL_TYPES") { // ✅ filter Game Type
    filtered = filtered.filter(m => m.gameType === gameTypeVal);
  }

  if(searchVal!==""){
    filtered = filtered.filter(m=>(
      m.team1.toLowerCase().includes(searchVal) ||
      m.team2.toLowerCase().includes(searchVal)
    ));
  }

  filtered.sort((a,b)=>b.date - a.date);

  // --- SUMMARY CALCULATION ---
  if (filtered.length > 0) {
    let winsA = 0, winsB = 0, pfA = 0, pfB = 0;
    filtered.forEach(m => {
      pfA += (m.team1 === teamA ? m.score1 : m.score2);
      pfB += (m.team1 === teamB ? m.score1 : m.score2);

      if (m.score1 > m.score2 && m.team1 === teamA) winsA++;
      else if (m.score2 > m.score1 && m.team2 === teamA) winsA++;

      if (teamB !== "ALL_TEAMS") {
        if (m.score1 > m.score2 && m.team1 === teamB) winsB++;
        else if (m.score2 > m.score1 && m.team2 === teamB) winsB++;
      }
    });

    document.getElementById("head2headSummary").textContent = `${filtered.length} games`;
    document.getElementById("mostRecent").textContent = formatDateShort(filtered[0].date);
    document.getElementById("cardTeam1PF").textContent = pfA;

    if (teamB === "ALL_TEAMS") {
      document.getElementById("cardTeam1Record").textContent = `${winsA} Wins`;
      document.getElementById("cardTeam2Record").textContent = `N/A`;
      document.getElementById("cardTeam2PF").textContent = `N/A`;
    } else {
      document.getElementById("cardTeam1Record").textContent = `${winsA} - ${winsB}`;
      document.getElementById("cardTeam2Record").textContent = `${winsB} - ${winsA}`;
      document.getElementById("cardTeam2PF").textContent = pfB;
    }

    document.getElementById("summaryArea").style.display = "flex";
  } else {
    document.getElementById("summaryArea").style.display = "none";
  }

  const tbody = document.querySelector("#matchTable tbody");
  tbody.innerHTML="";
  filtered.forEach(m=>{
    const tr = document.createElement("tr");
    tr.innerHTML = `
      <td>${formatDateShort(m.date)}</td>
      <td class="${Number(m.score1) > Number(m.score2) ? 'winner' : ''}">${m.team1}</td>
      <td class="${Number(m.score2) > Number(m.score1) ? 'winner' : ''}">${m.team2}</td>
      <td>${m.score1} - ${m.score2}</td>
      <td>${m.gameType || ""}</td>`;
    tbody.appendChild(tr);
  });

  document.getElementById("matchTableWrap").style.display="block";
  document.getElementById("noMatches").style.display=filtered.length===0?"block":"none";
  document.getElementById("summaryArea").style.display=filtered.length>0?"flex":"none";

  refreshCollapsibleHeight();
}

loadCsvAndInit();

// --- Collapsible logic ---
var coll = document.getElementsByClassName("collapsible");
for (let i = 0; i < coll.length; i++) {
  coll[i].addEventListener("click", function() {
    this.classList.toggle("active");
    var content = this.nextElementSibling;
    if (content.style.maxHeight){
      content.style.maxHeight = null;
    } else {
      content.style.maxHeight = content.scrollHeight + "px";
    } 
  });
}

// --- helper to fix cutoff issue ---
function refreshCollapsibleHeight() {
  document.querySelectorAll(".collapsible.active + .content").forEach(content => {
    content.style.maxHeight = content.scrollHeight + "px";
  });
}
</script>	
	
	
	
	
	
	
	</body>
</html>
